<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="900.0" prefWidth="1400.0" styleClass="dashboard-main-background" stylesheets="@../css/style.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="br.edu.ifba.saj.cliente.controller.MainController">
    <top>
        <HBox alignment="CENTER_LEFT" prefHeight="80.0" styleClass="dashboard-header" BorderPane.alignment="CENTER">
            <children>
                <VBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                    <children>
                        <Text styleClass="dashboard-title" text="Gerenciador de Tarefas" />
                        <Text styleClass="dashboard-subtitle" text="Sistema de Distribuição Inteligente" />
                    </children>
                </VBox>
                <HBox alignment="CENTER_RIGHT" spacing="20.0">
                    <children>
                        <VBox alignment="CENTER_RIGHT" spacing="2.0">
                            <children>
                                <Label fx:id="usuarioLogadoLabel" styleClass="user-welcome" text="Olá, Usuário" />
                                <Label styleClass="user-subtitle" text="Bem-vindo de volta" />
                            </children>
                        </VBox>
                        <Button mnemonicParsing="false" onAction="#handleLogout" styleClass="logout-button" text="Sair" />
                    </children>
                </HBox>
            </children>
            <padding>
                <Insets bottom="20.0" left="40.0" right="40.0" top="20.0" />
            </padding>
        </HBox>
    </top>

    <center>
        <HBox spacing="0.0" BorderPane.alignment="CENTER">
            <VBox prefWidth="300.0" styleClass="modern-sidebar" HBox.hgrow="NEVER">
                <children>
                    <VBox spacing="15.0">
                        <children>
                            <Label styleClass="sidebar-title" text="Navegação" />
                            <VBox spacing="8.0">
                                <children>
                                    <Button alignment="CENTER_LEFT" mnemonicParsing="false" prefHeight="50.0" prefWidth="260.0" styleClass="sidebar-button,sidebar-button-active" text="📋 Minhas Tarefas">
                                        <graphic>
                                            <Region prefHeight="20.0" prefWidth="20.0" />
                                        </graphic>
                                    </Button>
                                    <Button alignment="CENTER_LEFT" mnemonicParsing="false" onAction="#handleRegistrarTarefa" prefHeight="50.0" prefWidth="260.0" styleClass="sidebar-button" text="➕ Registrar Tarefa">
                                        <graphic>
                                            <Region prefHeight="20.0" prefWidth="20.0" />
                                        </graphic>
                                    </Button>
                                </children>
                            </VBox>
                        </children>
                    </VBox>

                    <VBox spacing="15.0" VBox.vgrow="ALWAYS">
                        <children>
                            <Label styleClass="sidebar-title" text="Estatísticas Rápidas" />
                            <VBox spacing="10.0">
                                <children>
                                    <HBox alignment="CENTER_LEFT" styleClass="stat-item">
                                        <children>
                                            <VBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Label fx:id="executandoCountLabel" styleClass="stat-number" text="0" />
                                                    <Label styleClass="stat-label" text="Em Execução" />
                                                </children>
                                            </VBox>
                                            <Region prefHeight="30.0" prefWidth="5.0" styleClass="stat-indicator-running" />
                                        </children>
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" styleClass="stat-item">
                                        <children>
                                            <VBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Label fx:id="concluidasCountLabel" styleClass="stat-number" text="0" />
                                                    <Label styleClass="stat-label" text="Concluídas" />
                                                </children>
                                            </VBox>
                                            <Region prefHeight="30.0" prefWidth="5.0" styleClass="stat-indicator-completed" />
                                        </children>
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" styleClass="stat-item">
                                        <children>
                                            <VBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Label fx:id="pendentesCountLabel" styleClass="stat-number" text="0" />
                                                    <Label styleClass="stat-label" text="Pendentes" />
                                                </children>
                                            </VBox>
                                            <Region prefHeight="30.0" prefWidth="5.0" styleClass="stat-indicator-pending" />
                                        </children>
                                    </HBox>
                                </children>
                            </VBox>
                        </children>
                        <VBox.margin>
                            <Insets top="30.0" />
                        </VBox.margin>
                    </VBox>
                </children>
                <padding>
                    <Insets bottom="30.0" left="20.0" right="20.0" top="30.0" />
                </padding>
            </VBox>

            <VBox spacing="25.0" styleClass="main-content-area" HBox.hgrow="ALWAYS">
                <children>
                    <HBox alignment="CENTER_LEFT">
                        <children>
                            <VBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                                <children>
                                    <Label styleClass="section-title" text="Minhas Tarefas" />
                                    <Label styleClass="section-subtitle" text="Gerencie e acompanhe o progresso das suas atividades" />
                                </children>
                            </VBox>
                            <Button onAction="#handleNovaTarefa" styleClass="primary-action-button" text="➕ Nova Tarefa" />
                        </children>
                    </HBox>

                    <HBox alignment="CENTER_LEFT" spacing="15.0" styleClass="filter-bar">
                        <children>
                            <VBox spacing="5.0">
                                <children>
                                    <Label styleClass="filter-label" text="Buscar tarefas" />
                                    <TextField fx:id="filterField" prefHeight="40.0" prefWidth="300.0" promptText="Digite para filtrar..." styleClass="search-input" />
                                </children>
                            </VBox>
                            <VBox spacing="5.0">
                                <children>
                                    <Label styleClass="filter-label" text="Prioridade" />
                                    <MenuButton fx:id="prioridadeMenuButton" mnemonicParsing="false" prefHeight="40.0" prefWidth="150.0" styleClass="filter-dropdown" text="Todas">
                                        <items>
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroPrioridade" text="Todas" />
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroPrioridade" text="Urgente" />
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroPrioridade" text="Alta" />
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroPrioridade" text="Normal" />
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroPrioridade" text="Baixa" />
                                        </items>
                                    </MenuButton>
                                </children>
                            </VBox>
                            <VBox spacing="5.0">
                                <children>
                                    <Label styleClass="filter-label" text="Status" />
                                    <MenuButton fx:id="statusMenuButton" mnemonicParsing="false" prefHeight="40.0" prefWidth="150.0" styleClass="filter-dropdown" text="Todos">
                                        <items>
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroStatus" text="Todos" />
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroStatus" text="Aguardando" />
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroStatus" text="Executando" />
                                            <MenuItem mnemonicParsing="false" onAction="#handleFiltroStatus" text="Concluida" />
                                        </items>
                                    </MenuButton>
                                </children>
                            </VBox>
                            <VBox alignment="BOTTOM_LEFT" spacing="5.0">
                                <children>
                                    <Label text=" " />
                                    <Button onAction="#handleFilter" prefHeight="40.0" styleClass="filter-button" text="🔍 Filtrar" />
                                </children>
                            </VBox>
                        </children>
                        <padding>
                            <Insets bottom="10.0" left="15.0" right="15.0" top="10.0" />
                        </padding>
                    </HBox>

                    <TableView fx:id="tabelaTarefas" styleClass="modern-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="idCol" maxWidth="120.0"
                                         minWidth="120.0" prefWidth="120.0" text="ID" />
                            <TableColumn fx:id="tituloCol" minWidth="200.0" prefWidth="250.0" text="Título" />
                            <TableColumn fx:id="prioridadeCol" maxWidth="100.0" minWidth="100.0" prefWidth="100.0" text="Prioridade" />
                            <TableColumn fx:id="statusCol"
                                         maxWidth="120.0" minWidth="120.0" prefWidth="120.0" text="Status" />
                            <TableColumn fx:id="criadaEmCol" maxWidth="130.0" minWidth="130.0" prefWidth="130.0" text="Criada em" />
                            <TableColumn fx:id="terminadaEmCol" maxWidth="130.0" minWidth="130.0" prefWidth="130.0" text="Concluída em" />
                            <TableColumn fx:id="acoesCol" maxWidth="120.0" minWidth="120.0" prefWidth="120.0" text="Ações" />
                        </columns>
                    </TableView>
                </children>
                <padding>
                    <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                </padding>
            </VBox>
        </HBox>
    </center>
</BorderPane>